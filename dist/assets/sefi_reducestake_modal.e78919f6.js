var e=Object.defineProperty,n=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(n,t,s)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,l=(e,n)=>{for(var t in n||(n={}))a.call(n,t)&&i(e,t,n[t]);if(s)for(var t of s(n))o.call(n,t)&&i(e,t,n[t]);return e};import{i as c,l as r,m as d,o as u,c as m,e as p,j as f,t as g,n as h,p as w,v}from"./vendor.8a209fa5.js";import{u as _,a as b}from"./index.72c64d4f.js";import{_ as k}from"./vk.02e351a6.js";const y={data:()=>({reduceStakesAmount:void 0,overflow_warning:!1,underflow_warning:!1,on_going_transaction:void 0,successful:void 0,available_tokens_for_withdrawl:void 0,current_reduce_stakes_amount:void 0}),computed:l(l({},c(_,["sefi_token_current_price"])),c(b,["balance"])),methods:(j=l({coinConvert:r},d(b,["sefiStakepoolTriggerWithdraw","sefiStakepoolCreateViewingKey"])),x={async reduce_stakes_check(e){if(console.log(this.balance),console.log(1e6*e),1e6*e>this.balance)this.overflow_warning=!0;else if(e<=0||null==e)this.underflow_warning=!0;else{this.on_going_transaction=!0,this.overflow_warning=!1,this.underflow_warning=!1;let n=await this.sefiStakepoolTriggerWithdraw(e);this.successful=n[0],this.successful?(this.on_going_transaction=!1,this.successful=!1,this.$refs.closeBtn.click(),this.clearFields(),this.$emit("sucessfulReduceStakes",{available_tokens_for_withdrawl:n[1],denom:"Sefi",current_reduce_stakes_amount:e})):(this.clearFields(),this.on_going_transaction=!1,this.$refs.closeBtn.click(),this.$emit("failedReduceStake",{error_message:n[1]}))}},async clearFields(){this.reduceStakesAmount="",this.overflow_warning=!1,this.underflow_warning=!1},async removeWarning(){this.overflow_warning=!1,this.underflow_warning=!1},async Percentage(e){this.reduceStakesAmount=r(r(this.balance,6,"human",6)*e,0,"human",6)}},n(j,t(x)))};var j,x;const S={class:"modal fade","data-bs-backdrop":"static",id:"sefiReduceStakeModal",tabindex:"-1","aria-labelledby":"ScrtModalLabel","aria-hidden":"true"},C={class:"modal-dialog modal-dialog-centered"},P={class:"modal-content deposit-modal-shape"},O={class:"container-fluid deposit-modal-bg deposit-modal-shape p-4"},A={class:"row m-0 p-0 deposit-modal-shape"},F={class:"row m-0 p-0 g-0"},R=p("div",{class:"col-6 d-flex justify-content-start align-items-center"},[p("span",{class:"deposit-modal-heading"},"Reduce Staked")],-1),W={class:"\n                  col-6\n                  d-flex\n                  justify-content-end\n                  align-items-center\n                  white\n                "},$={class:"row m-0 p-0 mt-3 g-0"},I=p("div",{class:"col-4 d-flex justify-content-start align-items-center"},[p("span",{class:"deposit-modal-available"},"Deposited")],-1),V={key:0,class:"\n                  col-8\n                  d-flex\n                  justify-content-end\n                  align-items-center\n                  white\n                "},B={class:"deposit-modal-amount"},D={class:"deposit-modal-dollars"},E={key:1,class:"\n                  col-8\n                  d-flex\n                  justify-content-end\n                  align-items-center\n                  white\n                "},K={class:"deposit-modal-amount"},L=p("img",{src:k},null,-1),M={key:0,class:"row m-0 p-0 mt-3"},T=[p("span",{class:"text-danger"},"*You are trying to Withdraw more than Deposited ",-1)],G={key:1,class:"row m-0 p-0 mt-3"},U=[p("span",{class:"text-danger"},"*Invalid number ",-1)],Y={class:"\n                row\n                m-0\n                p-0\n                mt-3\n                deposit-modal-deposit-field deposit-modal-deposit-field-shape\n              "},q={class:"col-9 d-flex justify-content-start align-items-center"},z=p("div",{class:"\n                  col-3\n                  d-flex\n                  justify-content-end\n                  align-items-center\n                  white\n                "},[p("span",{class:"deposit-modal-deposit-field-tokens"},"SEFI")],-1),H={class:"row g-0 d-flex justify-content-between mt-2"},J={key:2,class:"row m-0 p-0 mt-3 deposit-modal-deposit-button"},N={key:3,class:"\n                row\n                m-0\n                p-0\n                mt-3\n                deposit-modal-deposit-button\n                d-flex\n                justify-content-center\n                align-items-center\n              "},Q=[p("div",{class:"spinner-border text-light",role:"status"},[p("span",{class:"visually-hidden"},"Loading...")],-1)];y.render=function(e,n,t,s,a,o){return u(),m("div",S,[p("div",C,[p("div",P,[p("div",O,[p("div",A,[p("div",F,[R,p("div",W,[p("button",{type:"button",class:"btn-close white","data-bs-dismiss":"modal","aria-label":"Close",ref:"closeBtn",onClick:n[0]||(n[0]=e=>o.clearFields())},null,512)])]),p("div",$,[I,e.balance?(u(),m("div",V,[p("span",B,[f(g(o.coinConvert(e.balance,6,"human",2))+" SEFI ",1),p("span",D," ($"+g(o.coinConvert(o.coinConvert(e.balance,6,"human",2)*e.sefi_token_current_price,0,"human",2))+")",1)])])):(u(),m("div",E,[p("span",K,[L,p("span",{onClick:n[1]||(n[1]=n=>e.sefiStakepoolCreateViewingKey()),class:"deposit-modal-dollars"}," Create Viewing or Get Key ")])]))]),a.overflow_warning?(u(),m("div",M,T)):h("",!0),a.underflow_warning?(u(),m("div",G,U)):h("",!0),p("div",Y,[p("div",q,[p("span",null,[w(p("input",{class:"deposit-modal-deposit-field -none",type:"number",placeholder:"0.00","placeholder-default":"white","onUpdate:modelValue":n[2]||(n[2]=e=>a.reduceStakesAmount=e),overflow_warning:"false",onClick:n[3]||(n[3]=e=>o.removeWarning())},null,512),[[v,a.reduceStakesAmount]])])]),z]),p("div",H,[p("button",{class:"\n                  col-2\n                  d-flex\n                  justify-content-center\n                  deposit-modal-amount-percentage\n                ",onClick:n[4]||(n[4]=e=>o.Percentage(.25))}," 25% "),p("button",{class:"\n                  col-2\n                  d-flex\n                  justify-content-center\n                  align-items-center\n                  deposit-modal-amount-percentage\n                ",onClick:n[5]||(n[5]=e=>o.Percentage(.5))}," 50% "),p("button",{class:"\n                  col-2\n                  d-flex\n                  justify-content-center\n                  align-items-center\n                  deposit-modal-amount-percentage\n                ",onClick:n[6]||(n[6]=e=>o.Percentage(.75))}," 75% "),p("button",{class:"\n                  col-2\n                  d-flex\n                  justify-content-center\n                  align-items-center\n                  deposit-modal-amount-percentage\n                ",onClick:n[7]||(n[7]=e=>o.Percentage(1))}," 100% ")]),a.on_going_transaction?(u(),m("div",N,Q)):(u(),m("div",J,[p("button",{onClick:n[8]||(n[8]=e=>o.reduce_stakes_check(a.reduceStakesAmount)),id:"depositAmount",class:"btn text-white",type:"submit",value:"Submit",min:"0",max:"sefi_token_balance"}," Reduce Stakes ")]))])])])])])};export{y as default};
