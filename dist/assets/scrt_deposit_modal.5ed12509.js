var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,l=(e,t)=>{for(var s in t||(t={}))o.call(t,s)&&a(e,s,t[s]);if(n)for(var s of n(t))i.call(t,s)&&a(e,s,t[s]);return e};import{i as c,I as r,m as d,l as p,o as m,c as u,e as f,t as g,n as h,p as _,v as b,j as v}from"./vendor.8dcb4a7d.js";import{u as w}from"./index.7809e3f4.js";import{B as y}from"./bignumber.f9784317.js";import{_ as k}from"./scrt_logo.815745ea.js";const j={data(){return{depositamount:void 0,overflow_warning:void 0,underflow_warning:void 0,local_balance:this.balance,on_going_transaction:void 0,successful:void 0,scrt_total_deposits:void 0,staked_total:void 0}},computed:l(l({},c(r,["balance"])),c(w,["scrt_token_current_price","user_deposits"])),updated(){},methods:(x=l({},d(w,["scrtStakepoolDeposit","syncer_function_for_deposit"])),C={coinConvert:p,async deposit_check(e){let t=new y(e);t=t.multipliedBy(1e6).decimalPlaces(0);let s=new y(this.balance);if(t.isGreaterThan(s))console.log(p(this.sefi_token_balance,6,"human",6)),console.log(e),this.overflow_warning=!0;else if(t.isLessThan(1e6)||t.isNaN())this.underflow_warning=!0;else{this.on_going_transaction=!0,this.overflow_warning=!1,this.underflow_warning=!1;let s=await this.scrtStakepoolDeposit(t.toNumber());if(this.successful=s[0],e=s[1],this.scrt_total_deposits=s[2],this.staked_total=s[3],this.successful)r.$state({balance:r.balance-t}),this.on_going_transaction=!1,this.successful=!1,this.$refs.closeBtn.click(),this.clearFields(),console.log(this.staked_total/this.scrt_total_deposits*100),this.$emit("scrtsucessfulDeposit",{current_deposits:t.toNumber(),denom:"SCRT",pool_share:this.staked_total/this.scrt_total_deposits*100,total_deposits:this.staked_total});else{let e=this.user_deposits;await setTimeout(this.syncer_function_for_deposit,4e3),this.user_deposits<e&&(this.local_balance-=t),this.clearFields(),this.on_going_transaction=!1,this.$refs.closeBtn.click(),this.$emit("scrtfailedDeposit",{error_message:s[4]})}}},async clearFields(){this.depositamount="",this.overflow_warning=!1,this.underflow_warning=!1},async removeWarning(){this.overflow_warning=!1,this.underflow_warning=!1},async Percentage(e){this.depositamount=p(p(this.balance,6,"human",6)*e,0,"human",6)}},t(x,s(C)))};var x,C;const O={class:"modal fade","data-bs-backdrop":"static",id:"scrtDepositModal",tabindex:"-1","aria-labelledby":"SefiModalLabel","aria-hidden":"true"},P={class:"modal-dialog modal-dialog-centered"},S={class:"modal-content p-4 deposit-modal-bg"},D={class:"row m-0 p-0"},T={class:"row m-0 p-0 g-0"},$=f("div",{class:"col-6 d-flex justify-content-start align-items-center"},[f("span",{class:"deposit-modal-heading"},"Deposit")],-1),B={class:"col-6 d-flex justify-content-end align-items-center white"},F={class:"row m-0 p-0 mt-3 g-0"},L=f("div",{class:"col-4 d-flex justify-content-start align-items-center"},[f("span",{class:"deposit-modal-available"},"Available")],-1),N={class:"col-8 d-flex justify-content-end align-items-center white"},R={class:"pe-2"},z=f("span",{class:"d-flex align-items-center"},[f("img",{src:k,alt:"LOGO Image",class:"img-fluid mini-logo-size"})],-1),A=v(" SCRT "),I={class:"ps-1 pool_past_prizes"},M={key:0,class:"row m-0 p-0 mt-3"},G=[f("span",{class:"text-danger"},"*You are trying to deposit more than Available ",-1)],W={key:1,class:"row m-0 p-0 mt-3"},E=[f("span",{class:"text-danger"},"*Minimum deposit 1 SCRT ",-1)],U={class:"\n              row\n              m-0\n              p-0\n              mt-3\n              deposit-modal-deposit-field deposit-modal-deposit-field-shape\n            "},V={class:"col-9 d-flex justify-content-start align-items-center"},Y=f("div",{class:"col-3 d-flex justify-content-end align-items-center white"},[f("span",{class:"deposit-modal-deposit-field-tokens"},"SCRT")],-1),q={class:"row g-0 d-flex justify-content-between mt-2"},H={key:2,class:"row m-0 p-0 mt-3 deposit-modal-deposit-button"},J={key:3,class:"\n              row\n              m-0\n              p-0\n              mt-3\n              deposit-modal-deposit-button\n              d-flex\n              justify-content-center\n              align-items-center\n            "},K=[f("div",{class:"spinner-border text-light",role:"status"},[f("span",{class:"visually-hidden"},"Loading...")],-1)];j.render=function(e,t,s,n,o,i){return m(),u("div",O,[f("div",P,[f("div",S,[f("div",D,[f("div",T,[$,f("div",B,[f("button",{type:"button",class:"btn-close white","data-bs-dismiss":"modal","aria-label":"Close",ref:"closeBtn",onClick:t[0]||(t[0]=e=>i.clearFields())},null,512)])]),f("div",F,[L,f("div",N,[f("span",R,g(i.coinConvert(e.balance,6,"human",2)),1),z,A,f("span",I," ($ "+g(i.coinConvert(i.coinConvert(e.balance/1e6,0,"human",0)*e.scrt_token_current_price,0,"human",2))+")",1)])]),o.overflow_warning?(m(),u("div",M,G)):h("",!0),o.underflow_warning?(m(),u("div",W,E)):h("",!0),f("div",U,[f("div",V,[f("span",null,[_(f("input",{class:"deposit-modal-deposit-field -none",type:"number",placeholder:"0.00","placeholder-default":"white",lazy:"",id:"input_field","onUpdate:modelValue":t[1]||(t[1]=e=>o.depositamount=e),onClick:t[2]||(t[2]=e=>i.removeWarning())},null,512),[[b,o.depositamount]])])]),Y]),f("div",q,[f("button",{class:"\n                col-2\n                d-flex\n                justify-content-center\n                deposit-modal-amount-percentage\n              ",onClick:t[3]||(t[3]=e=>i.Percentage(.25))}," 25% "),f("button",{class:"\n                col-2\n                d-flex\n                justify-content-center\n                align-items-center\n                deposit-modal-amount-percentage\n              ",onClick:t[4]||(t[4]=e=>i.Percentage(.5))}," 50% "),f("button",{class:"\n                col-2\n                d-flex\n                justify-content-center\n                align-items-center\n                deposit-modal-amount-percentage\n              ",onClick:t[5]||(t[5]=e=>i.Percentage(.75))}," 75% "),f("button",{class:"\n                col-2\n                d-flex\n                justify-content-center\n                align-items-center\n                deposit-modal-amount-percentage\n              ",onClick:t[6]||(t[6]=e=>i.Percentage(1))}," 100% ")]),o.on_going_transaction?(m(),u("div",J,K)):(m(),u("div",H,[f("button",{onClick:t[7]||(t[7]=e=>i.deposit_check(o.depositamount)),id:"depositAmount",class:"btn text-white",type:"submit",value:"Submit"}," Deposit ")]))])])])])};export{j as default};
