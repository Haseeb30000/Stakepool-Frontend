var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,l=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&o(e,n,t[n]);if(s)for(var n of s(t))i.call(t,n)&&o(e,n,t[n]);return e};import{i as r,l as c,m as d,o as u,c as m,e as p,t as g,n as f,p as w,v as h,q as _,j as v}from"./vendor.8dcb4a7d.js";import{u as b}from"./index.629cb501.js";import{B as y}from"./bignumber.f9784317.js";import{_ as k}from"./scrt_logo.815745ea.js";const j={data:()=>({reduceStakesAmount:void 0,overflow_warning:!1,underflow_warning:!1,on_going_transaction:void 0,successful:void 0,current_reduce_stakes_amount:void 0}),computed:l({},r(b,["user_deposits","available_tokens_for_withdrawl","scrt_token_current_price"])),methods:(x=l({coinConvert:c},d(b,["scrtStakepoolTriggerWithdraw","scrtStakepoolCreateViewingKey","syncer_function_for_trigger_withdraw_and_redelegate"])),S={async reduce_stakes_check(e){let t=new y(e);t=t.multipliedBy(1e6).decimalPlaces(0);let n=new y(this.user_deposits);if(t.isGreaterThan(n))this.overflow_warning=!0;else if(t.isLessThanOrEqualTo(0)||t.isNaN())this.underflow_warning=!0;else{this.on_going_transaction=!0,this.overflow_warning=!1,this.underflow_warning=!1;let e=await this.scrtStakepoolTriggerWithdraw(t);this.successful=e[0],this.successful?(this.on_going_transaction=!1,this.successful=!1,this.$refs.closeBtn.click(),this.clearFields(),this.$emit("sucessfulReduceStakes",{available_tokens_for_withdrawl:this.available_tokens_for_withdrawl,denom:"SCRT",current_reduce_stakes_amount:t.toNumber()})):(await setTimeout(this.syncer_function_for_trigger_withdraw_and_redelegate,5e3),this.clearFields(),this.on_going_transaction=!1,this.$refs.closeBtn.click(),this.$emit("failedReduceStake",{error_message:e[1]}))}},async clearFields(){this.reduceStakesAmount="",this.overflow_warning=!1,this.underflow_warning=!1},async removeWarning(){this.overflow_warning=!1,this.underflow_warning=!1},async Percentage(e){this.reduceStakesAmount=c(c(this.user_deposits,6,"human",6)*e,0,"human",6)}},t(x,n(S)))};var x,S;const C={class:"modal fade","data-bs-backdrop":"static",id:"scrtReduceStakeModal",tabindex:"-1","aria-labelledby":"ScrtModalLabel","aria-hidden":"true"},O={class:"modal-dialog modal-dialog-centered"},T={class:"modal-content deposit-modal-shape"},P={class:"container-fluid deposit-modal-bg deposit-modal-shape p-4"},R={class:"row m-0 p-0 deposit-modal-shape"},A={class:"row m-0 p-0 g-0"},B=p("div",{class:"col-6 d-flex justify-content-start align-items-center"},[p("span",{class:"deposit-modal-heading"},"Reduce Staked")],-1),V={class:"\n                  col-6\n                  d-flex\n                  justify-content-end\n                  align-items-center\n                  white\n                "},W=_('<div class="row m-0 p-0 mt-3 g-0 text-white fw-lighter"><span class=""> This will remove your SCRT tokens from the rewards contract. You will have to withdraw your SCRT to see it in your wallet </span></div><div class="row m-0 p-0 g-0 rounded-3 p-4 border mt-4"><div class="col-2 d-flex justify-content-start align-items-start"><span class="deposit-modal-heading fs-1">⚠</span></div><div class="\n                  col-10\n                  d-flex\n                  justify-content-start\n                  align-items-center\n                  white\n                "><div class="ul"> Once the unbonding period begins you will: <div class="li">- not be able to cancel the unbonding</div><div class="li"> - need to wait 21 days for the amount to be liquid </div></div></div></div>',2),$={class:"row m-0 p-0 mt-3 g-0"},F=p("div",{class:"col-4 d-flex justify-content-start align-items-center"},[p("span",{class:"deposit-modal-available"},"Deposited")],-1),K={key:0,class:"\n                  col-8\n                  d-flex\n                  justify-content-end\n                  align-items-center\n                  white\n                "},L={class:"deposit-modal-amount pe-1"},q=p("span",{class:"d-flex align-items-center"},[p("img",{src:k,alt:"LOGO Image",class:"img-fluid mini-logo-size"})],-1),z=v(" SCRT "),D={class:"pool_past_prizes ps-2"},G={key:1,class:"\n                  col-8\n                  d-flex\n                  justify-content-end\n                  align-items-center\n                  white\n                "},I={class:"deposit-modal-amount"},N=p("span",{class:"col-2",style:{"font-size":"20px"}},"🔍",-1),E={key:0,class:"row m-0 p-0 mt-3"},M=[p("span",{class:"text-danger"},"*You are trying to Withdraw more than Deposited ",-1)],Y={key:1,class:"row m-0 p-0 mt-3"},U=[p("span",{class:"text-danger"},"*Invalid number ",-1)],H={class:"\n                row\n                m-0\n                p-0\n                mt-3\n                deposit-modal-deposit-field deposit-modal-deposit-field-shape\n              "},J={class:"col-9 d-flex justify-content-start align-items-center"},Q=p("div",{class:"\n                  col-3\n                  d-flex\n                  justify-content-end\n                  align-items-center\n                  white\n                "},[p("span",{class:"deposit-modal-deposit-field-tokens"},"SCRT")],-1),X={class:"row g-0 d-flex justify-content-between mt-2"},Z={key:2,class:"row m-0 p-0 mt-3 deposit-modal-deposit-button"},ee={key:3,class:"\n                row\n                m-0\n                p-0\n                mt-3\n                deposit-modal-deposit-button\n                d-flex\n                justify-content-center\n                align-items-center\n              "},te=[p("div",{class:"spinner-border text-light",role:"status"},[p("span",{class:"visually-hidden"},"Loading...")],-1)];j.render=function(e,t,n,s,a,i){return u(),m("div",C,[p("div",O,[p("div",T,[p("div",P,[p("div",R,[p("div",A,[B,p("div",V,[p("button",{type:"button",class:"btn-close white","data-bs-dismiss":"modal","aria-label":"Close",ref:"closeBtn",onClick:t[0]||(t[0]=e=>i.clearFields())},null,512)])]),W,p("div",$,[F,e.user_deposits?(u(),m("div",K,[p("span",L,g(i.coinConvert(e.user_deposits,6,"human",2)),1),q,z,p("span",D," ($"+g(i.coinConvert(i.coinConvert(e.user_deposits,6,"human",2)*e.scrt_token_current_price,0,"human",2))+")",1)])):(u(),m("div",G,[p("span",I,[N,p("a",{onClick:t[1]||(t[1]=t=>e.scrtStakepoolCreateViewingKey()),class:"createViewingKey"}," Create or Get Viewing Key ")])]))]),a.overflow_warning?(u(),m("div",E,M)):f("",!0),a.underflow_warning?(u(),m("div",Y,U)):f("",!0),p("div",H,[p("div",J,[p("span",null,[w(p("input",{class:"deposit-modal-deposit-field -none",type:"number",placeholder:"0.00","placeholder-default":"white","onUpdate:modelValue":t[2]||(t[2]=e=>a.reduceStakesAmount=e),overflow_warning:"false",onClick:t[3]||(t[3]=e=>i.removeWarning())},null,512),[[h,a.reduceStakesAmount]])])]),Q]),p("div",X,[p("button",{class:"\n                  col-2\n                  d-flex\n                  justify-content-center\n                  deposit-modal-amount-percentage\n                ",onClick:t[4]||(t[4]=e=>i.Percentage(.25))}," 25% "),p("button",{class:"\n                  col-2\n                  d-flex\n                  justify-content-center\n                  align-items-center\n                  deposit-modal-amount-percentage\n                ",onClick:t[5]||(t[5]=e=>i.Percentage(.5))}," 50% "),p("button",{class:"\n                  col-2\n                  d-flex\n                  justify-content-center\n                  align-items-center\n                  deposit-modal-amount-percentage\n                ",onClick:t[6]||(t[6]=e=>i.Percentage(.75))}," 75% "),p("button",{class:"\n                  col-2\n                  d-flex\n                  justify-content-center\n                  align-items-center\n                  deposit-modal-amount-percentage\n                ",onClick:t[7]||(t[7]=e=>i.Percentage(1))}," 100% ")]),a.on_going_transaction?(u(),m("div",ee,te)):(u(),m("div",Z,[p("button",{onClick:t[8]||(t[8]=e=>i.reduce_stakes_check(a.reduceStakesAmount)),id:"depositAmount",class:"btn text-white",type:"submit",value:"Submit"}," Reduce Stakes ")]))])])])])])};export{j as default};
