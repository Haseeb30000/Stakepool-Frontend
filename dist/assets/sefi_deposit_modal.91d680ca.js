var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,l=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&a(e,n,t[n]);if(s)for(var n of s(t))i.call(t,n)&&a(e,n,t[n]);return e};import{i as c,l as d,m as r,o as p,c as m,e as u,j as f,t as g,n as _,p as h,v}from"./vendor.8a209fa5.js";import{u as w,a as b}from"./index.4d0cd54e.js";const y={data:()=>({depositamount:void 0,overflow_warning:void 0,underflow_warning:void 0,on_going_transaction:void 0,successful:void 0,total_deposits:void 0,staked_total:void 0}),computed:l(l({},c(w,["sefi_token_balance","sefi_token_balance_in_usd"])),c(b,[])),methods:(k=l(l({coinConvert:d},r(b,["sefiStakepoolDeposit","syncer_function_for_deposit"])),r(w,["createOrGetViewingKey","getSefiContractBalance"])),j={async deposit_check(e){if(e>d(this.sefi_token_balance,6,"human",6))console.log(d(this.sefi_token_balance,6,"human",6)),console.log(e),this.overflow_warning=!0;else if(e<=0||null==e)this.underflow_warning=!0;else{this.on_going_transaction=!0,this.overflow_warning=!1,this.underflow_warning=!1;let t=await this.sefiStakepoolDeposit(d(1e6*e,0,"human",0));this.successful=t[0],e=t[1],this.total_deposits=t[2],this.staked_total=t[3],console.log("THE TOTAL DEPOSITS",this.total_deposits),this.getSefiContractBalance(),this.successful?(this.on_going_transaction=!1,this.successful=!1,this.$refs.closeBtn.click(),this.clearFields(),this.$emit("sucessfulDeposit",{current_deposits:e,denom:"Sefi",pool_share:this.staked_total/this.total_deposits*100,total_deposits:this.staked_total})):(this.syncer_function_for_deposit(),this.clearFields(),this.on_going_transaction=!1,this.$refs.closeBtn.click(),this.$emit("failedDeposit",{error_message:t[4]}),console.log(t[4]))}},async clearFields(){this.depositamount="",this.overflow_warning=!1,this.underflow_warning=!1},async removeWarning(){this.overflow_warning=!1,this.underflow_warning=!1},async Percentage(e){this.depositamount=d(d(this.sefi_token_balance,6,"human",6)*e,0,"human",6)}},t(k,n(j)))};var k,j;const x={class:"modal fade","data-bs-backdrop":"static",id:"sefiDepositModal",tabindex:"-1","aria-labelledby":"SefiModalLabel","aria-hidden":"true"},C={class:"modal-dialog modal-dialog-centered"},O={class:"modal-content deposit-modal-shape"},S={class:"container-fluid deposit-modal-bg deposit-modal-shape p-4"},P={class:"row m-0 p-0 deposit-modal-shape"},D={class:"row m-0 p-0 g-0"},F=u("div",{class:"col-6 d-flex justify-content-start align-items-center"},[u("span",{class:"deposit-modal-heading"},"Deposit")],-1),B={class:"\n                  col-6\n                  d-flex\n                  justify-content-end\n                  align-items-center\n                  white\n                "},E={class:"row m-0 p-0 mt-3 g-0"},I=u("div",{class:"col-4 d-flex justify-content-start align-items-center"},[u("span",{class:"deposit-modal-available"},"Available")],-1),V={key:0,class:"\n                  col-8\n                  d-flex\n                  justify-content-end\n                  align-items-center\n                  white\n                "},$={class:"deposit-modal-amount"},A={class:"deposit-modal-dollars"},K={key:1,class:"\n                  col-8\n                  d-flex\n                  justify-content-end\n                  align-items-center\n                  white\n                "},T={class:"deposit-modal-amount"},G=u("span",{class:"col-2",style:{"font-size":"20px"}},"🔍",-1),L={key:0,class:"row m-0 p-0 mt-3"},z=[u("span",{class:"text-danger"},"*You are trying to deposit more than Available ",-1)],M={key:1,class:"row m-0 p-0 mt-3"},W=[u("span",{class:"text-danger"},"*Invalid number ",-1)],H={class:"\n                row\n                m-0\n                p-0\n                mt-3\n                deposit-modal-deposit-field deposit-modal-deposit-field-shape\n              "},U={class:"col-9 d-flex justify-content-start align-items-center"},Y=u("div",{class:"\n                  col-3\n                  d-flex\n                  justify-content-end\n                  align-items-center\n                  white\n                "},[u("span",{class:"deposit-modal-deposit-field-tokens"},"SEFI")],-1),q={class:"row g-0 d-flex justify-content-between mt-2"},J={key:2,class:"row m-0 p-0 mt-3 deposit-modal-deposit-button"},N={key:3,class:"\n                row\n                m-0\n                p-0\n                mt-3\n                deposit-modal-deposit-button\n                d-flex\n                justify-content-center\n                align-items-center\n              "},Q=[u("div",{class:"spinner-border text-light",role:"status"},[u("span",{class:"visually-hidden"},"Loading...")],-1)];y.render=function(e,t,n,s,o,i){return p(),m("div",x,[u("div",C,[u("div",O,[u("div",S,[u("div",P,[u("div",D,[F,u("div",B,[u("button",{type:"button",class:"btn-close white","data-bs-dismiss":"modal","aria-label":"Close",ref:"closeBtn",onClick:t[0]||(t[0]=e=>i.clearFields())},null,512)])]),u("div",E,[I,e.sefi_token_balance?(p(),m("div",V,[u("span",$,[f(g(i.coinConvert(e.sefi_token_balance,6,"human",1))+" SEFI ",1),u("span",A," ($"+g(i.coinConvert(e.sefi_token_balance_in_usd,6,"human",1))+")",1)])])):(p(),m("div",K,[u("span",T,[G,u("span",{onClick:t[1]||(t[1]=t=>e.createOrGetViewingKey()),class:"createViewingKey"}," Create or Get Viewing Key ")])]))]),o.overflow_warning?(p(),m("div",L,z)):_("",!0),o.underflow_warning?(p(),m("div",M,W)):_("",!0),u("div",H,[u("div",U,[u("span",null,[h(u("input",{class:"deposit-modal-deposit-field -none",type:"number",placeholder:"0.00","placeholder-default":"white",lazy:"",id:"input_field","onUpdate:modelValue":t[2]||(t[2]=e=>o.depositamount=e),min:"0",onClick:t[3]||(t[3]=e=>i.removeWarning())},null,512),[[v,o.depositamount]])])]),Y]),u("div",q,[u("button",{class:"\n                  col-2\n                  d-flex\n                  justify-content-center\n                  deposit-modal-amount-percentage\n                ",onClick:t[4]||(t[4]=e=>i.Percentage(.25))}," 25% "),u("button",{class:"\n                  col-2\n                  d-flex\n                  justify-content-center\n                  align-items-center\n                  deposit-modal-amount-percentage\n                ",onClick:t[5]||(t[5]=e=>i.Percentage(.5))}," 50% "),u("button",{class:"\n                  col-2\n                  d-flex\n                  justify-content-center\n                  align-items-center\n                  deposit-modal-amount-percentage\n                ",onClick:t[6]||(t[6]=e=>i.Percentage(.75))}," 75% "),u("button",{class:"\n                  col-2\n                  d-flex\n                  justify-content-center\n                  align-items-center\n                  deposit-modal-amount-percentage\n                ",onClick:t[7]||(t[7]=e=>i.Percentage(1))}," 100% ")]),o.on_going_transaction?(p(),m("div",N,Q)):(p(),m("div",J,[u("button",{onClick:t[8]||(t[8]=e=>i.deposit_check(o.depositamount)),id:"depositAmount",class:"btn text-white",type:"submit",value:"Submit",min:"0",max:"sefi_token_balance"}," Desposit ")]))])])])])])};export{y as default};
